# Feedback Loop Analysis: 2026-02-07

## Ground Truth Status

- **Resolved live forecasts with valid predictions**: 0 (41835 was post-resolution — bug now fixed)
- **Retrodictions with ground truth**: 3
  - 41521 (binary): Brier **0.7225** — BAD
  - 41747 (numeric): Within CI — OK (median $5,000M vs actual $4,261M)
  - 41517 (multiple choice): Log score **-1.14** — assigned 32% to actual outcome
- **All retrodictions pass airtightness** (no future leak detected)

## Object-Level Findings

### Tool Failures

| Tool | Failure | Count | Fix Applied |
|------|---------|-------|-------------|
| `get_cp_history` | 404 — agent passes post_id, tool needs question_id | 3/6 meta-reflections | Auto-detect: try as question_id first, fallback to post_id resolution |
| `polymarket_price` | Returns unrelated sports markets | 2 | No fix — sparse market coverage expected |
| `search_exa` | Error in retrodict mode | 1 | Existing — may be blind mode restriction |

### Reasoning Quality Assessment (Retrodictions)

**41521 (UNGA Venezuela, Brier 0.72):**
- Agent found Panama (1989) and Grenada (1983) precedents → forecasted 85% yes
- Critical error: Mechanically applied precedent without checking causal conditions
- Agent itself noted "no UNGA resolution drafted yet" but didn't adjust down
- Counter-precedent (Iraq 2003: massive opposition, no resolution) was missed
- **Root cause**: Precedent over-indexing without causal modeling

**41747 (Zepbound revenue, within CI):**
- Strong multi-method analysis (YoY growth, sequential seasonality, guidance decomposition)
- Median 17% too high ($5,000M vs $4,261M) but wide CI saved it
- Overweighted Q4 2024 seasonal pattern despite Q3 2025 growth deceleration signal
- **Root cause**: Seasonal patterns can break when underlying growth normalizes

**41517 (FOMC dissents, log -1.14):**
- Correctly identified Miran as near-certain dissenter (3 consecutive)
- Assigned 42% to 1 dissent, 32% to 2 dissents — actual was 2
- Missed Waller as a returning dissenter (Governor, not rotating member)
- **Root cause**: Focused on new rotating members, didn't track repeat participants

### Cross-Cutting Pattern

All three errors trace to **over-generalizing patterns without causal modeling**:
1. Historical precedent applied mechanically
2. Seasonal pattern assumed to persist despite moderation
3. Recent pattern (Miran dissents) extrapolated without modeling other actors

### Agent Capability Requests

- CP history for meta-predictions (now fixed — auto-detect ID type)
- Historical CP volatility data for meta-prediction calibration
- No scheduled events calendar (agents search for "upcoming events" manually)

## Meta-Level Findings

### Meta-Reflection Coverage
- **6/19 forecasts (33%)** have meta-reflections since Feb 4
- All 19 have `log_path` and `tool_metrics` (100% instrumentation)
- Coverage gap likely due to agent running out of tokens/time before reflection step

### Data Quality
- `notes/meta/` was legacy — 19 orphaned files migrated to `notes/sessions/`
- `feedback_collect.py` didn't filter post-resolution forecasts (41835 bug persisted from Feb 4 analysis — now fixed)
- Retrodiction data was orphaned — now collected via `--include-retrodict`

## Meta-Meta Findings (Feedback Loop Infrastructure)

### Updates to feedback-loop.md
- Added Phase 1c: Collect and Analyze Retrodiction Results (was missing)
- Renumbered: 1b (Retrodict + Airtightness), 1c (Collect Results), 1d (CP section)
- Added Phase 6: Queue Retrodictions (final step of every session)
- Updated Scripts Available with `--include-retrodict` flag

### Scripts Updated
- `feedback_collect.py`: Added `--include-retrodict` flag, added post-resolution filter, added `RetrodictResult` model
- `migrate_meta.py`: Fixed directory structure (was `<pid>_<ts>`, now `<pid>/<ts>/`), added collision handling
- `history.py`: Added `load_retrodict_forecasts()` function

### Code Changes
- `forecasting.py`: `get_cp_history` now auto-detects question_id vs post_id (try → 404 → resolve)
- `prompts.py`: Added "Precedent Skepticism" section after "Nothing Ever Happens"

### Documentation Fixes
- `CLAUDE.md`: Updated `notes/meta/` reference to `notes/sessions/`
- `README.md`: Same

## Changes Made

| Level | Change | Rationale |
|-------|--------|-----------|
| Object | `get_cp_history` auto-detects ID type | 100% failure rate in meta-predictions — agents only have post_id |
| Object | Added "Precedent Skepticism" prompt section | All 3 retrodictions showed over-indexing on historical patterns |
| Object | Post-resolution forecast filter in `feedback_collect.py` | 41835 (Brier 0.0009) was invalid — forecast made after resolution |
| Meta | `--include-retrodict` in `feedback_collect.py` | Retrodiction data was generated but never collected/analyzed |
| Meta | `load_retrodict_forecasts()` in `history.py` | No function existed to load retrodict data |
| Meta-Meta | Phase 1c added to feedback-loop.md | Gap: retrodictions generated but not incorporated into analysis |
| Meta-Meta | Phase 6 added to feedback-loop.md | Retrodiction queue as final output enables feedback cycle |
| Meta-Meta | Migrated notes/meta/ → notes/sessions/ | Legacy location was orphaned from actual code paths |

## Retrodiction Queue

From the 11 missed resolved questions, these are the best retrodiction candidates:

```bash
# Retrodiction queue from feedback loop 2026-02-07
# Rationale: Diverse types, clear resolutions, challenging reasoning
# 41839: Binary (New START renewal) - geopolitical treaty prediction
# 41838: Numeric (Alphabet Q4 revenue) - financial forecasting
# 41454: Numeric (VIX max intraday) - market volatility
# 41451: Multiple choice (Grammy Best Trad Country) - cultural prediction
uv run forecast retrodict 41839 41838 41454 41451
```

**Why these four:**
- **41839** (New START): Tests geopolitical reasoning — resolved "no", challenges precedent-based thinking
- **41838** (Alphabet revenue): Tests numeric forecasting — good comparison to Zepbound retrodiction
- **41454** (VIX max): Tests volatility/distribution reasoning — numeric with bounded range
- **41451** (Grammy): Tests cultural/entertainment prediction — very different domain
