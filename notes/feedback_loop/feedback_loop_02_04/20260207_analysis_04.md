# Feedback Loop Analysis: 2026-02-07 Session 4

## Ground Truth Status
- Resolved questions in tournament: 12
- Questions with our live forecasts that resolved: **0** (all 12 were missed)
- Live forecasts outstanding: 77 (none resolved yet)
- Retrodict results with resolution: 7 (5 hits, 1 big miss, 1 ambiguous)
- Average retrodict Brier: ~0.25 (excluding the 0.72 outlier)

## Object-Level Findings

### Critical Bug: `get_cp_history` 100% Failure Rate

**The bug**: `get_cp_history` used the deprecated `/api/questions/{id}/aggregate-history/` endpoint which returns 404 for ALL question IDs. The Metaculus API removed this endpoint.

**Impact**: 8 of 8 CP history calls failed, all on meta-prediction questions. The agent could not see CP trajectory data for any meta-prediction it forecasted.

**Fix**: Rewrote to use `GET /api/posts/{id}/?with_cp_history=true` which returns full historical CP data (tested: 386 data points for a 9-month old question).

**Commit**: `7afb499 fix(tools): rewrite get_cp_history to use working posts API endpoint`

### Meta-Prediction CP Trajectory Analysis

Analyzed 14 meta-predictions by checking whether the underlying question's CP was above/below the threshold:

| Situation | Count | Agent Accuracy |
|-----------|-------|----------------|
| CP firmly above threshold (7+ pp) | 3 | Agent 65-78% — JUSTIFIED |
| CP near threshold (0-3pp) | 2 | Agent overconfident (70%, 55%) — WRONG direction |
| CP below or at threshold | 9 | Agent 22-47% — appropriately cautious |

**Verdict**: Agent is NOT systematically biased. Its errors correlate with lack of CP trajectory data — in both wrong cases, CP was DECLINING but agent only saw a snapshot.

### Retrodict Calibration (Resolved Questions)

| QID | Type | Forecast | Resolution | Brier | Assessment |
|-----|------|----------|------------|-------|------------|
| 41451 | MC | 35% Zach Top | Zach Top won | -1.05 (log) | CORRECT |
| 41454 | Numeric | 19.5 (CI: 15.5-27.0) | 20.99 | within CI | CORRECT |
| 41517 | MC | 42% (1 dissent) | 2 dissents | -1.14 (log) | MISS |
| 41521 | Binary | 85% YES | NO | 0.722 | BAD MISS |
| 41747 | Numeric | 5000 (CI: 3900-6200) | 4261 | within CI | CORRECT |
| 41838 | Numeric | 31.3 (CI: 30.2-32.5) | 31.618 | within CI | CORRECT |
| 41839 | Binary | 1% | NO | 0.0001 | CORRECT |

**41521 deep dive**: Agent over-indexed on historical precedent (Panama 1989, Grenada 1983) for UN resolution. The "Precedent Skepticism" prompt section was added AFTER this retrodict run. Key failure: agent assigned only -0.5 logit for "no UNGA resolution scheduled yet" — this should have been weighted much more heavily. The absence of process after 11 days was strong negative evidence.

### Tool Usage Patterns

| Tool | Calls | Error % | Notes |
|------|-------|---------|-------|
| get_metaculus_questions | 23 | 0% | Works well |
| execute_code | 18 | 0% | Works well |
| get_cp_history | 8 | **100%** | **FIXED** |
| wikipedia | 8 | 12.5% | WebFetch 403, has fallback |
| google_trends | 7 | 14.3% | Occasional failures |

### Non-Meta High-Divergence Forecasts

Cannot analyze CP trajectories for AIB tournament questions (CP is hidden). Key cases awaiting resolution:
- [41906] 88% vs CP 40% — Trump admin federal funding reduction (has specific DOJ evidence)
- [41846] 30% vs CP 15% — Successful coup in Africa/LatAm (well-reasoned time decay)

## Meta-Level Findings

### Meta-Reflection Quality: HIGH
- All meta-reflections have genuine reasoning, specific evidence, honest calibration
- Tool failure vs. empty results distinction is well-maintained
- Subagent usage is consistently low — justified for most questions

### Data Gaps
- No resolved live forecasts yet — can only calibrate from retrodict data
- AIB tournament CP hidden — cannot track trajectory for main tournament questions
- `get_cp_history` failure meant 0 trajectory data for meta-predictions (now fixed)

## Meta-Meta Findings

### What Worked Well
- `feedback_collect.py --new-only` correctly tracked already-analyzed items
- CP comparison data was useful for identifying meta-prediction pattern
- Resolution update script correctly identified 0 new resolutions

### What Could Be Better
- Need a script to automatically fetch CP trajectories for underlying questions of meta-predictions
- `feedback_collect.py` should check for newly resolved questions, not just use cached results
- Consider adding Brier score tracking to retrodict results in `feedback_state.json`

## Changes Made

| Level | Change | Rationale |
|-------|--------|-----------|
| Object | Rewrote `get_cp_history` to use posts API | 100% failure rate on critical tool for meta-predictions |
| Object | Added `_ensure_post_id()` ID resolution | New endpoint needs post_id, agent passes either ID type |
| Object | Added `_format_timestamp()` for Unix timestamps | New API returns floats instead of ISO strings |
| Test | Added 7 unit tests for CP history processing | Validate new timestamp handling and retrodict cutoff filtering |

## Next Session Priorities

1. **Run retrodict on newly missed questions** — 31 questions missed in last 30 days, only ~15 retrodicted
2. **Wait for meta-prediction resolutions** — Feb 11/12/14/15 dates will provide first ground truth for meta-predictions WITH working CP history
3. **Check if precedent skepticism improves 41521-type questions** — Re-retrodict with current prompts
4. **Monitor tool error rates** — The semaphore fix and CP history fix should reduce error rates significantly
